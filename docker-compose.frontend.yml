# =============================================================================
# SpaceForge — FRONTEND  (standalone, independently deployable)
#
# Start: docker compose -f docker-compose.frontend.yml up --build
#
# The frontend container joins the shared "spaceforge_net" network so it can
# reach the backend at http://backend:8000 (used by the vite preview proxy).
# The JS bundle itself uses BACKEND_PUBLIC_URL baked in at build time.
#
# First-time setup (if network doesn't exist yet):
#   docker network create spaceforge_net
# =============================================================================

networks:
  spaceforge_net:
    external: true

services:
  frontend:
    build:
      context: ./frontend
      args:
        # Internal proxy target — container DNS, never the public ngrok URL.
        VITE_PROXY_TARGET: http://backend:8000
    ports:
      - "${FRONTEND_PORT:-4173}:4173"
    env_file: .env
    environment:
      VITE_PROXY_TARGET: http://backend:8000
    networks:
      - spaceforge_net
    restart: unless-stopped
